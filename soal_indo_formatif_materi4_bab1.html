<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Kuis Bahasa Indonesia — Kelas 6</title>
  <link rel="icon" href="dl.png" type="image/x-icon"/>

  <style>
    /* Reset ringkas */
    *,*::before,*::after{box-sizing:border-box}
    html:focus-within{scroll-behavior:smooth}
    body,h1,h2,h3,p{margin:0}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}

    /* Tokens */
    :root{
      --bg:#f6f8fb; --surface:#ffffff; --text:#0f172a; --muted:#475569;
      --brand:#0ea5e9; --brand-600:#0284c7; --accent:#22c55e;
      --card:#ffffff; --radius:18px;
      --shadow:0 18px 36px rgba(2,8,23,.14);
      --border:1px solid color-mix(in oklab, var(--muted) 22%, transparent);
      --container:1200px; --ring:0 0 0 3px rgba(14,165,233,.35);

      --fs-base:17px;
      --fs-title:1.4rem;
      --fs-label:1rem;
      --fs-btn:1rem;
    }
    @media (prefers-color-scheme: dark){
      :root{ --bg:#0b1220; --surface:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --card:#111827; --shadow:0 18px 36px rgba(2,8,23,.36) }
    }

    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,"Helvetica Neue",Arial,"Noto Sans";
      background:
        radial-gradient(1200px 380px at 8% -8%, color-mix(in oklab, var(--brand) 16%, transparent), transparent 60%),
        var(--bg);
      color:var(--text); line-height:1.65; min-height:100dvh; display:flex; flex-direction:column;
      font-size:var(--fs-base);
    }
    a:focus-visible,button:focus-visible,input:focus-visible{outline:none;box-shadow:var(--ring);border-radius:.7rem}

    /* HEADER (hero foto + overlay) */
    header.hero{
      position:relative; text-align:center; color:#fff;
      padding: clamp(40px, 7vw, 84px) 20px; overflow:hidden; isolation:isolate;
    }
    header.hero::before{content:"";position:absolute;inset:0;z-index:-2;background:url('bg7.jpg') center/cover no-repeat;transform:scale(1.02)}
    header.hero::after{content:"";position:absolute;inset:0;z-index:-1;background:linear-gradient(180deg,rgba(2,8,23,.55),rgba(2,8,23,.42) 40%,rgba(2,8,23,.55))}
    .hero h1{font-size:clamp(30px,5vw,46px);font-weight:900;letter-spacing:.2px;text-shadow:0 2px 18px rgba(0,0,0,.35)}
    .hero p.sub{max-width:980px;margin:10px auto 0;font-size:clamp(15px,2.2vw,19px);opacity:.98;text-shadow:0 1px 12px rgba(0,0,0,.28)}

    /* NAV putih + chip aktif biru muda */
    .nav{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid #e5e7eb;backdrop-filter:blur(8px)}
    .nav .inner{max-width:var(--container);margin-inline:auto;padding:12px 18px;display:flex;flex-wrap:wrap;justify-content:center;gap:14px}
    .navlinks{display:flex;gap:18px;flex-wrap:wrap;justify-content:center}
    .navlinks a{
      display:inline-flex;align-items:center;justify-content:center;
      padding:10px 14px;border-radius:14px;font-weight:700;font-size:var(--fs-btn);
      color:#64748b;transition:background-color .18s,color .18s,transform .18s
    }
    .navlinks a:hover{background:#f1f7ff;color:#0f172a}
    .navlinks a[aria-current="page"], .navlinks a.active{
      background:#dbeafe;color:#0f172a;box-shadow:inset 0 1px 0 rgba(255,255,255,.65)
    }

    /* Kontainer utama */
    .container{max-width:var(--container);margin:0 auto;padding:34px 22px;flex:1}

    /* Kartu form & kuis */
    .card{
      background:var(--card); border:var(--border); border-radius:var(--radius);
      box-shadow:var(--shadow);
    }
    .pad{padding:20px}
    .stack{display:grid; gap:16px}

    /* Form identitas */
    .id-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .control{display:grid; gap:8px}
    .control label{font-weight:800; font-size:var(--fs-label)}
    .control input{
      border:1px solid #d9dee7; border-radius:12px; padding:12px 14px; background:#fff; color:var(--text);
      font-size:1.02rem;
    }

    /* Progress */
    .progress{
      height:12px; background:#eef2f7; border-radius:999px; overflow:hidden;
      border:1px solid #e6ebf2; margin-top:2px;
    }
    .progress > span{display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--brand),var(--brand-600))}

    /* Quiz */
    .quiz-wrap{margin-top:18px}
    .qhead{display:flex; justify-content:space-between; align-items:center; gap:14px}
    .qtitle{font-size:var(--fs-title); font-weight:900}
    .qnum{font-weight:800; color:var(--muted); font-size:1rem}

    .qtext{font-weight:800; font-size:1.15rem; margin-top:2px}

    .options{display:grid; gap:12px; margin-top:12px}
    .opt{
      display:flex; align-items:center; gap:12px; padding:12px 14px; border-radius:14px;
      border:1px solid #dfe5ee; background:linear-gradient(180deg,#fff, #fafbfd);
      transition:.18s border-color,.18s transform,.18s box-shadow;
      cursor:pointer; font-size:1.02rem;
    }
    .opt:hover{ border-color: color-mix(in oklab, var(--brand) 40%, #dfe5ee); transform:translateY(-1px); box-shadow:0 10px 22px rgba(2,8,23,.08)}
    .opt input{ accent-color: var(--brand); width:20px; height:20px }

    /* Tombol aksi */
    .actions{display:flex; justify-content:space-between; gap:12px; margin-top:16px; flex-wrap:wrap}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:12px 16px; border-radius:14px; border:1px solid transparent; font-weight:900; letter-spacing:.2px;
      cursor:pointer; transition:.18s transform,.18s filter,.18s background-color; font-size:var(--fs-btn);
    }
    .btn:active{ transform:translateY(1px) }
    .btn-primary{ background:linear-gradient(135deg,var(--brand),var(--brand-600)); color:#fff }
    .btn-ghost{ background:#fff; border-color:#e5e7eb; color:#0f172a }
    .btn-ghost:hover{ background:#f8fafc }

    /* Hasil */
    .result{display:none; margin-top:18px}
    .summary{display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px}
    .pill{
      background:linear-gradient(180deg, rgba(14,165,233,.10), rgba(14,165,233,.05));
      border:1px solid color-mix(in oklab, var(--brand) 38%, #e5e7eb);
      border-radius:14px; padding:12px 14px; font-weight:900; text-align:center; font-size:1.05rem;
    }
    .good{ color:#16a34a }
    .bad{ color:#dc2626 }

    .review{margin-top:12px; display:grid; gap:10px}
    .rev-item{
      border:1px dashed #e2e8f0; border-radius:14px; padding:12px 14px; background:#fff;
      display:grid; gap:8px; font-size:1rem;
    }
    .rev-item .stat{font-size:1rem; color:var(--muted)}
    .rev-item .stat .ok{color:#16a34a; font-weight:900}
    .rev-item .stat .no{color:#dc2626; font-weight:900}

    footer{margin-top:auto;color:#64748b;border-top:1px solid #e5e7eb;background:#fff}
    .foot-inner{max-width:var(--container);margin-inline:auto;text-align:center;padding:18px 22px}

    /* ===== PRINT (F4) ===== */
    @media print{
      @page { size: 210mm 330mm; margin: 12mm; } /* F4 portrait */
      body{ background:#fff !important; }
      header.hero, .nav, .container > :not(#printSheet){ display:none !important; }
      #printSheet{ display:block !important; }
    }

    /* Lembar cetak */
    #printSheet{
      display:none; color:#000; background:#fff; width:210mm; min-height:330mm; margin:0 auto;
      padding:6mm 4mm; font: 12pt/1.5 "Times New Roman", Georgia, "Nimbus Roman", serif;
    }
    .ps-header{ text-align:center; margin-bottom:6mm }
    .ps-header h2{ font-size:18pt; margin-bottom:1mm }
    .ps-header small{ font-size:11pt }

    .ps-id{ display:grid; grid-template-columns:1fr 1fr; gap:3mm; border:1px solid #222; padding:4mm; margin-bottom:5mm }
    .ps-id div{ font-size:12pt }
    .ps-id b{ font-weight:700 }

    .ps-score{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:3mm; margin-bottom:5mm }
    .ps-chip{ border:1px solid #222; padding:3mm; text-align:center; font-weight:700 }

    .ps-list{ border:1px solid #222; padding:4mm; }
    .pitem{ break-inside: avoid; margin-bottom:3.5mm; }
    .pitem b{ font-weight:700 }
    .pmeta{ font-size:11pt; color:#111 }

    .ps-validate{
      display:grid; grid-template-columns:1.4fr .8fr; gap:4mm; margin-top:6mm; border:1px solid #222; padding:4mm;
    }
    .ps-validate .box{ border:1px dashed #222; min-height:30mm; padding:3mm }
    .ps-validate .box h4{ margin:0 0 3mm 0; font-size:12pt }
    .line{ display:block; border-bottom:1px solid #000; margin:8mm 0 0; }
    .sign{ display:grid; gap:2mm; margin-top:2mm; }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="hero">
    <h1>Soal Formatif Bahasa Indonesia — Kelas 6</h1>
    <h2>Soal Bab 1 Surat Elektronik</h2>
    <p class="sub">Jawab pertanyaan berikut. Skor dihitung otomatis. Setelah selesai, unduh PDF ukuran F4 untuk dikumpulkan ke guru.</p>
  </header>

  <!-- NAV -->
  <nav class="nav" role="navigation" aria-label="Navigasi utama">
    <div class="inner">
      <div class="navlinks">
        <a href="B.Indo6beberapaFormatif.html">Kembali</a>
        <a href="Bank Soal.html" aria-current="page">Bank Soal</a>
        <a href="modul ajar indo6.html">Modul Ajar</a>
        <a href="videopembelajaran.html">Video Pembelajaran</a>
        <a href="Bukudigital.html">Buku Digital</a>
        <a href="forum diskusi.html">Forum Diskusi</a>
      </div>
    </div>
  </nav>

  <!-- KONTEN -->
  <main class="container">
    <!-- Identitas -->
    <section class="card pad stack" aria-labelledby="judul-identitas">
      <h2 id="judul-identitas" style="font-size:1.25rem; font-weight:900">Identitas Siswa</h2>
      <div class="id-grid">
        <div class="control">
          <label for="nama">Nama</label>
          <input id="nama" name="nama" type="text" placeholder="Nama lengkap" autocomplete="name">
        </div>
        <div class="control">
          <label for="kelas">Kelas</label>
          <input id="kelas" name="kelas" type="text" placeholder="Mis. 6A / 6B">
        </div>
      </div>
    </section>

    <!-- Kuis -->
    <section class="card pad quiz-wrap" aria-labelledby="judul-kuis">
      <div class="stack">
        <div class="qhead">
          <h2 id="judul-kuis" class="qtitle">Soal Pilihan Ganda</h2>
          <div class="qnum" id="qnum">Pertanyaan 1 dari 8</div>
        </div>

        <div class="progress" aria-hidden="true"><span id="bar"></span></div>

        <div class="qtext" id="qtext"></div>
        <div class="options" id="options"></div>

        <div class="actions">
          <button class="btn btn-ghost" id="prevBtn" type="button">← Sebelumnya</button>
          <div style="display:flex; gap:10px; margin-left:auto">
            <button class="btn btn-ghost" id="resetBtn" type="button">Reset</button>
            <button class="btn btn-primary" id="nextBtn" type="button" disabled>Berikutnya →</button>
            <button class="btn btn-primary" id="submitBtn" type="button" style="display:none">Kumpulkan</button>
          </div>
        </div>

        <!-- Hasil -->
        <div class="result" id="result">
          <div class="summary">
            <div class="pill">Benar: <span id="scorenum">0 / 0</span></div>
            <div class="pill">Skor: <span id="scorepct">0%</span></div>
            <div class="pill">Tanggal: <span id="whenTxt">-</span></div>
            <div class="pill" id="remedial" style="display:none; color:#dc2626;">Remedial</div>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px">
            <button class="btn btn-primary" id="pdfBtn" type="button">📄 Unduh PDF</button>
            <button class="btn btn-ghost" id="printBtn" type="button">🖨️ Cetak</button>
            <button class="btn btn-ghost" id="retryBtn" type="button">🔁 Ulangi</button>
          </div>

          <div class="review" id="review" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- LEMBAR CETAK -->
    <section id="printSheet" aria-hidden="true"></section>
  </main>

  <!-- FOOTER -->
  <footer role="contentinfo">
    <div class="foot-inner">
      <small>&copy; <span id="year"></span> Platform Pembelajaran Bermakna — Kuis Bahasa Indonesia.</small>
    </div>
  </footer>

  <script>
    // Tahun dinamis
    document.getElementById('year').textContent = new Date().getFullYear();

    // === DATA SOAL (contoh 8) ===
    
const QUESTIONS = [
  // Pengertian Surat Elektronik (Email)
  { id:1, text:"Apa yang dimaksud dengan surat elektronik (email)?", options:["Surat yang dikirim secara fisik melalui kantor pos","Surat yang dikirim melalui media elektronik menggunakan alamat email","Surat yang hanya digunakan untuk komunikasi bisnis","Surat yang dikirim menggunakan aplikasi pesan instan"], correct:1 },
  { id:2, text:"Salah satu kelebihan dari surat elektronik dibandingkan surat konvensional adalah...", options:["Kecepatan pengiriman dan kemudahan akses dari berbagai perangkat","Memerlukan biaya pengiriman yang tinggi","Hanya bisa mengirimkan teks tanpa gambar atau dokumen","Memiliki format yang lebih rumit"], correct:0 },

  // Komponen-Komponen Surat Elektronik
  { id:3, text:"Apa yang dimaksud dengan 'subjek' dalam email?", options:["Judul atau topik utama yang memberikan gambaran tentang isi email","Alamat email penerima","Salam pembuka dalam email","Bagian untuk menulis isi email"], correct:0 },
  { id:4, text:"Bagian email yang berisi informasi tentang pengirim dan jabatan pengirim disebut...", options:["Penutupan","Isi email","Tanda tangan","Subjek"], correct:2 },
  { id:5, text:"Apa yang harus diperhatikan saat menulis alamat email penerima?", options:["Pastikan alamat email benar agar pesan sampai ke penerima yang tepat","Gunakan alamat email yang panjang","Alamat email tidak perlu mencantumkan domain","Gunakan alamat email penerima dengan tanda baca yang salah"], correct:0 },
  { id:6, text:"Dalam email, bagian mana yang berisi pesan yang ingin disampaikan?", options:["Salam pembuka","Subjek","Isi email","Tanda tangan"], correct:2 },
  { id:7, text:"Bagian mana dari email yang digunakan untuk mengakhiri komunikasi dengan sopan?", options:["Subjek","Isi email","Penutupan","Lampiran"], correct:2 },
  { id:8, text:"Bagian 'lampiran' dalam email digunakan untuk...", options:["Mengirimkan file atau dokumen tambahan","Menulis subjek email","Menulis salam penutup","Menuliskan tanda tangan pengirim"], correct:0 },

  // Tata Cara Menulis Surat Elektronik
  { id:9, text:"Sebelum menulis email, apa yang perlu dilakukan terlebih dahulu?", options:["Menentukan tujuan email","Menggunakan bahasa yang tidak formal","Membuka aplikasi email","Mengirimkan pesan tanpa memikirkan tujuan"], correct:0 },
  { id:10, text:"Apa yang sebaiknya ditulis dalam subjek email?", options:["Menulis subjek yang panjang dan tidak jelas","Menulis subjek yang menggambarkan isi email dengan singkat dan jelas","Menulis subjek yang membingungkan penerima","Meninggalkan subjek kosong"], correct:1 },
  { id:11, text:"Apa yang sebaiknya dilakukan setelah menulis email?", options:["Mengirim email tanpa memeriksa kembali","Membaca kembali email untuk memastikan tidak ada kesalahan atau informasi yang kurang","Menghapus email yang telah ditulis","Menambahkan emotikon pada email formal"], correct:1 },
  { id:12, text:"Mengapa penting untuk menggunakan bahasa yang sopan dan jelas dalam email?", options:["Agar pesan mudah dipahami dan menunjukkan profesionalitas","Untuk membuat email lebih panjang","Agar penerima merasa bingung","Untuk membuat email terlihat lebih santai"], correct:0 },
  { id:13, text:"Jika email berisi informasi sensitif, apa yang harus diperhatikan?", options:["Mengirimkan email tanpa enkripsi","Membagikan informasi pribadi kepada siapa saja","Mengirimkan email hanya kepada penerima yang tepat dan menggunakan enkripsi jika perlu","Menggunakan bahasa yang tidak jelas"], correct:2 },

  // Etika dan Tips Menulis Email
  { id:14, text:"Apa yang harus diperhatikan saat menulis email formal?", options:["Gunakan bahasa yang santai dan tidak baku","Gunakan bahasa yang sopan, jelas, dan sesuai dengan konteks","Gunakan banyak emoji untuk membuat email terlihat lebih ramah","Gunakan bahasa yang bertele-tele dan tidak jelas"], correct:1 },
  { id:15, text:"Mengapa penting untuk memeriksa lampiran sebelum mengirim email?", options:["Agar memastikan file yang tepat sudah terlampir dan tidak ada kesalahan","Agar email terlihat lebih penuh","Agar email tidak terkirim dengan cepat","Untuk membuat email lebih panjang"], correct:0 },
  { id:16, text:"Jika kamu ingin mengirimkan dokumen melalui email, bagian apa yang harus disertakan?", options:["Alamat email penerima","Lampiran file yang sesuai","Subjek yang tidak relevan","Salam penutup yang bertele-tele"], correct:1 },
  { id:17, text:"Dalam email formal, sebaiknya menggunakan salam pembuka seperti...", options:["Halo teman-teman","Yth. Bapak/Ibu [Nama Penerima]","Hai semua","Apa kabar?"], correct:1 },
  { id:18, text:"Bagaimana cara menutup email secara sopan?", options:["Dengan menulis kata-kata yang terlalu kasual","Dengan ucapan terima kasih atau harapan untuk tindak lanjut","Dengan menyertakan emotikon","Dengan tidak menulis penutupan"], correct:1 },

  // Contoh Surat Elektronik
  { id:19, text:"Jika Anda ingin meminta izin cuti melalui email, bagian apa yang perlu ada dalam email tersebut?", options:["Subjek yang tidak jelas","Alasan cuti, tanggal cuti, dan harapan untuk disetujui","Cerita panjang tentang pekerjaan yang sedang dilakukan","Penggunaan emotikon untuk menunjukkan emosi"], correct:1 },
  { id:20, text:"Dalam email yang menanyakan informasi produk, subjek yang tepat adalah...", options:["Pengalaman belanja saya","Tanya mengenai produk terbaru","Informasi lebih lanjut","Beli produk sekarang"], correct:1 },
  { id:21, text:"Contoh subjek email yang baik adalah...", options:["Lihat Ini!","Permohonan Cuti untuk Tanggal 25 Agustus","Hai, bagaimana kabarnya?","Baca ini sekarang juga!"], correct:1 },

  // Tata Cara Pengiriman Email
  { id:22, text:"Sebelum mengirim email, kita harus memeriksa apakah...", options:["Semua kolom diisi dengan benar, dan lampiran yang diperlukan sudah ada","Email terlalu panjang dan tidak jelas","Lampiran yang tidak relevan sudah ditambahkan","Email tidak memiliki subjek"], correct:0 },
  { id:23, text:"Jika kamu tidak yakin dengan alamat email penerima, apa yang harus dilakukan?", options:["Mengirim email tanpa memeriksa alamat email penerima","Meminta konfirmasi alamat email penerima sebelum mengirim email","Mengabaikan alamat email yang salah","Membiarkan alamat email kosong"], correct:1 },
  
  // Keamanan dan Kerahasiaan Email
  { id:24, text:"Untuk menjaga kerahasiaan informasi dalam email, sebaiknya...", options:["Mengirim email ke banyak orang tanpa izin","Menggunakan enkripsi jika diperlukan dan mengirim email hanya kepada penerima yang tepat","Membuka email yang dikirim oleh orang asing","Menambahkan informasi pribadi secara sembarangan"], correct:1 },
  { id:25, text:"Jika email mengandung informasi sensitif, sebaiknya kita...", options:["Mengirimnya tanpa enkripsi untuk mempercepat pengiriman","Menggunakan enkripsi dan mengirimkan hanya kepada orang yang tepat","Mengirimkan tanpa membatasi siapa yang bisa membacanya","Mengirimkan dengan menggunakan bahasa yang tidak jelas"], correct:1 }
];



    // === STATE ===
    let index = 0;
    const answers = new Array(QUESTIONS.length).fill(null);
    const $ = (id) => document.getElementById(id);

    const qnumEl = $("qnum"), qtextEl = $("qtext"), optsEl = $("options");
    const barEl = $("bar"), submitBtn = $("submitBtn"), nextBtn = $("nextBtn"), prevBtn = $("prevBtn");

    init();

    function init(){
      // Enabling Next Button once fields are filled
      const checkFields = () => {
        if (document.getElementById("nama").value !== "" && document.getElementById("kelas").value !== "") {
          nextBtn.disabled = false;
        } else {
          nextBtn.disabled = true;
        }
      };

      document.getElementById("nama").addEventListener("input", checkFields);
      document.getElementById("kelas").addEventListener("input", checkFields);

      renderQuestion();
      updateProgress();
      updateButtons();

      nextBtn.addEventListener("click", () => {
        if(index < QUESTIONS.length-1){
          index++;
          renderQuestion();
          updateProgress();
          updateButtons();
        }
      });

      prevBtn.addEventListener("click", () => {
        if(index > 0){
          index--;
          renderQuestion();
          updateProgress();
          updateButtons();
        }
      });

      submitBtn.addEventListener("click", submitQuiz);
      $("resetBtn").addEventListener("click", resetQuiz);
      $("retryBtn").addEventListener("click", () => { resetQuiz(); window.scrollTo({top:0, behavior:'smooth'}); });
      $("printBtn").addEventListener("click", () => { buildPrintSheet(); window.print(); });
      $("pdfBtn").addEventListener("click", () => { buildPrintSheet(); setTimeout(()=>window.print(), 100); });
    }

    // Render satu soal
    function renderQuestion(){
      const q = QUESTIONS[index];
      qnumEl.textContent = `Pertanyaan ${index+1} dari ${QUESTIONS.length}`;
      qtextEl.textContent = q.text;

      optsEl.innerHTML = "";
      q.options.forEach((opt, i) => {
        const id = `q${q.id}_opt${i}`;
        const wrap = document.createElement("label");
        wrap.className = "opt";
        wrap.setAttribute("for", id);

        const input = document.createElement("input");
        input.type = "radio";
        input.name = `q${q.id}`;
        input.id = id;
        input.value = i;
        input.checked = (answers[index] === i);
        input.addEventListener("change", () => {
          answers[index] = i;
          updateProgress();
          updateButtons();
        });

        const span = document.createElement("span");
        span.textContent = opt;

        wrap.appendChild(input);
        wrap.appendChild(span);
        optsEl.appendChild(wrap);
      });
    }

    function updateProgress(){
      const answered = answers.filter(v => v !== null).length;
      const pct = Math.round((answered / QUESTIONS.length) * 100);
      barEl.style.width = pct + "%";
    }

    function updateButtons(){
      prevBtn.disabled = index === 0;
      nextBtn.style.display = (index < QUESTIONS.length-1) ? "inline-flex" : "none";
      submitBtn.style.display = (index === QUESTIONS.length-1) ? "inline-flex" : "none";
    }

    // Hitung skor
    function calculateScore(){
      let correct = 0;
      const detail = QUESTIONS.map((q, i) => {
        const ans = answers[i];
        const isCorrect = (ans === q.correct);
        if(isCorrect) correct++;
        return {
          no: i+1,
          soal: q.text,
          jawaban: ans !== null ? q.options[ans] : "(kosong)",
          kunci: q.options[q.correct],
          benar: isCorrect
        };
      });
      return { correct, total: QUESTIONS.length, detail };
    }

    function submitQuiz(){
      if(answers.some(v => v === null)){
        if(!confirm("Masih ada jawaban yang kosong. Tetap kumpulkan?")) return;
      }
      const {correct, total, detail} = calculateScore();
      const pct = Math.round(correct/total*100);
      const when = new Date().toLocaleString("id-ID", { dateStyle:"long", timeStyle:"short" });

      $("result").style.display = "block";
      $("scorenum").textContent = `${correct} / ${total}`;
      $("scorepct").textContent = `${pct}%`;
      $("whenTxt").textContent = when;

      const review = $("review");
      review.innerHTML = "";
      detail.forEach(item => {
        const div = document.createElement("div");
        div.className = "rev-item";
        div.innerHTML = `
          <div><strong>Soal ${item.no}:</strong> ${item.soal.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</div>
          <div class="stat">Jawaban kamu: <span class="${item.benar ? 'ok' : 'no'}">${(item.jawaban||'').replace(/&/g,"&amp;").replace(/</g,"&lt;")}</span> · Kunci: <strong>${item.kunci.replace(/&/g,"&amp;").replace(/</g,"&lt;")}</strong></div>
        `;
        review.appendChild(div);
      });

      document.querySelector(".result").scrollIntoView({behavior:"smooth", block:"start"});

      const payload = buildPayload({correct,total,detail});
      localStorage.setItem("hasil-kuis-bindo6", JSON.stringify(payload));

      // === Remedial ===
      const lastResult = localStorage.getItem("hasil-kuis-bindo6");
      if(lastResult){
        const prevData = JSON.parse(lastResult);
        if(prevData.nama === data.nama && prevData.tanggal !== data.tanggal){
          document.getElementById('remedial').style.display = 'inline';
        }
      }
    }

    function resetQuiz(){
      for(let i=0; i<answers.length; i++) answers[i] = null;
      index = 0;
      renderQuestion(); updateProgress(); updateButtons();
      $("result").style.display = "none";
    }

    function buildPayload(calc){
      const nama = (document.getElementById("nama").value || "").trim();
      const kelas = (document.getElementById("kelas").value || "").trim();
      const when = new Date();
      const tanggal = when.toLocaleString("id-ID", { dateStyle:"long", timeStyle:"short" });
      const pct = Math.round(calc.correct/calc.total*100);

      return {
        nama, kelas, tanggal,
        correct: calc.correct, total: calc.total, pct,
        detail: calc.detail
      };
    }

    // === Lembar Cetak ===
    function buildPrintSheet(){
      const calc = calculateScore();
      const data = buildPayload(calc);
      const sheet = document.getElementById("printSheet");

      const rows = data.detail.map(d => `
        <div class="pitem">
          <div><b>Soal ${d.no}.</b> ${escapeHTML(d.soal)}</div>
          <div class="pmeta">Jawaban: ${escapeHTML(d.jawaban)} ${d.benar ? ' (✓ Benar)' : ' (✗ Salah)'} · Kunci: ${escapeHTML(d.kunci)}</div>
        </div>
      `).join("");

      sheet.innerHTML = `
        <div class="ps-header">
          <h2>Kuis Bahasa Indonesia — Kelas 6</h2>
        </div>

        <div class="ps-id">
          <div><b>Nama</b> : ${escapeHTML(data.nama || "-")}</div>
          <div><b>Kelas</b> : ${escapeHTML(data.kelas || "-")}</div>
          <div><b>Tanggal</b> : ${escapeHTML(data.tanggal)}</div>
          <div><b>Jumlah Soal</b> : ${data.total}</div>
        </div>

        <div class="ps-score">
          <div class="ps-chip">Benar: ${data.correct} / ${data.total}</div>
          <div class="ps-chip">Skor: ${data.pct}%</div>
          <div class="ps-chip">Status: ${data.pct >= 75 ? 'Tuntas' : 'Perlu Penguatan'}</div>
        </div>

        <div class="ps-list">
          ${rows}
        </div>

        <div class="ps-validate">
          <div class="box">
            <h4>Kotak Validasi Guru</h4>
            <div>Catatan Guru:</div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
          </div>
          <div class="box">
            <h4>Paraf/TTD Guru</h4>
            <div class="sign">
              <div>Nama Guru: __________________________</div>
              <div>Tanggal   : ____ / ____ / ______</div>
              <div>Tanda Tangan:</div>
              <div style="height:20mm;border:1px solid #000;margin-top:2mm"></div>
              <div style="margin-top:3mm">Stempel:</div>
              <div style="height:18mm;border:1px solid #000"></div>
            </div>
          </div>
        </div>
      `;
    }

    function escapeHTML(str){
      return String(str).replace(/[&<>"']/g, s => ({
        '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'
      }[s]));
    }
  </script>
</body>
</html>
